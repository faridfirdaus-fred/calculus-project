<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kalkulator Determinan Matriks</title>
    <!-- Include Tailwind CSS -->
    <style>
      .gradient {
        background: linear-gradient(90deg, #ffa600 0%, hsl(209, 81%, 61%) 100%);
      }

      /* Hover effect for button */
      .hover\:bg-gradient:hover {
        background: linear-gradient(90deg, #ffa600 0%, hsl(209, 81%, 61%) 100%);
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
  </head>

  <body class="py-12 bg-white bg-gray-400 gradient">
    <!-- NAVBAR STARTED -->
    <nav id="header" class="fixed top-0 z-30 w-full text-white">
      <div
        class="container flex flex-wrap items-center justify-between py-2 mx-auto mt-0"
      >
        <div class="flex items-center pl-4">
          <a
            class="text-2xl font-bold text-white no-underline toggleColour hover:no-underline lg:text-4xl"
            href="#"
          >
            <!--Icon from: http://www.potlabicons.com/ -->
            <img
              src="img/math-svgrepo-com.svg"
              class="inline h-12 fill-current"
              alt="icon navbar"
            />
            CALCUMAT
          </a>
        </div>
        <div class="block pr-4 lg:hidden">
          <button
            id="nav-toggle"
            class="flex items-center p-1 text-pink-800 transition duration-300 ease-in-out transform hover:text-gray-900 focus:outline-none focus:shadow-outline hover:scale-105"
          >
            <svg
              class="w-6 h-6 fill-current"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <title>Menu</title>
              <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z" />
            </svg>
          </button>
        </div>
        <div
          class="z-20 flex-grow hidden w-full p-4 mt-2 text-black bg-white lg:flex lg:items-center lg:w-auto lg:mt-0 lg:bg-transparent lg:p-0"
          id="nav-content"
        >
          <ul class="items-center justify-end flex-1 list-reset lg:flex">
            <li class="mr-3">
              <a
                class="inline-block px-4 py-2 text-black uppercase opacity-80 hover:opacity-100"
                href="index.html"
                >Beranda</a
              >
            </li>
            <li class="mr-3">
              <a
                class="inline-block px-4 py-2 text-black no-underline uppercase hover:text-gray-800 hover:text-underline opacity-80 hover:opacity-100"
                href="#"
                >Materi</a
              >
            </li>

            <li class="mr-3">
              <a
                a
                class="inline-block px-4 py-2 text-black no-underline uppercase hover:text-gray-800 hover:text-underline opacity-80 hover:opacity-100"
                href="contact.html#kontak"
                >Kontak
              </a>
            </li>
            <li class="mr-3">
              <a
                class="inline-block px-4 py-2 text-black no-underline uppercase hover:text-gray-800 hover:text-underline opacity-80 hover:opacity-100"
                href="#"
                >Tentang kami</a
              >
            </li>
          </ul>

          <button
            id="navAction"
            class="px-8 py-4 mx-auto mt-4 font-bold text-gray-800 uppercase transition duration-300 ease-in-out transform bg-white border rounded-full shadow opacity-75 lg:mx-0 lg:mt-0 focus:outline-none focus:shadow-outline hover:scale-105 border-slat-300"
          >
            Mulai hitung
          </button>
        </div>
      </div>
      <hr class="py-0 my-0 border-b border-gray-100 opacity-25" />
    </nav>
    <!-- NAVBAR END  -->
    <!-- KALKULATOR DETERMINAN START  -->
    <section id="kalkulator-determinan" class="pt-20 bg-wh">
      <div class="w-11/12 mx-auto">
        <div class="flex flex-wrap">
          <!-- DETERMINAN ORDO 3X3 START  -->
          <div
            class="w-full max-w-md p-6 mx-auto bg-white rounded-lg shadow-2xl lg:w-1/2"
          >
            <h1 class="mb-4 text-2xl font-bold">
              Kalkulator Determinan Matriks 3x3
            </h1>
            <form id="matrixForm">
              <div class="grid grid-cols-3 gap-4">
                <input
                  id="a11"
                  type="text"
                  placeholder="a11"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a12"
                  type="text"
                  placeholder="a12"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a13"
                  type="text"
                  placeholder="a13"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a21"
                  type="text"
                  placeholder="a21"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a22"
                  type="text"
                  placeholder="a22"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a23"
                  type="text"
                  placeholder="a23"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a31"
                  type="text"
                  placeholder="a31"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a32"
                  type="text"
                  placeholder="a32"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a33"
                  type="text"
                  placeholder="a33"
                  class="px-3 py-1 border rounded"
                />
              </div>
              <div class="flex items-center justify-between mt-4">
                <button
                  type="submit"
                  class="px-4 py-2 text-white transition duration-500 ease-in-out bg-blue-600 rounded hover:bg-gradient"
                >
                  Hitung Determinan
                </button>
                <button
                  type="button"
                  id="clearInputs"
                  class="w-10 px-2 py-2 transition duration-500 bg-white border-black border-gray-100 rounded-full hover:bg-gradient"
                >
                  <img src="img/refresh-cw-alt-3-svgrepo-com.svg" alt="" />
                </button>
              </div>
            </form>
            <div id="result" class="mt-4"></div>
            <div id="explanation" class="mt-4 text-gray-600"></div>
            <div id="history" class="mt-4">
              <h2 class="mb-2 text-xl font-bold">History</h2>
              <ul id="historyList"></ul>
            </div>
          </div>

          <!-- DETERMINAN ORDO 3X3 END  -->
          <!-- DETERMINAN ORDO 2X2 START  -->
          <!-- HTML -->
          <div
            class="w-full max-w-md p-6 mx-auto mt-20 bg-white rounded-lg shadow-lg lg:mt-0 lg:w-1/2"
          >
            <h1 class="mb-4 text-2xl font-bold">
              Kalkulator Determinan Matriks 2x2
            </h1>
            <form id="matrixForm_2x2">
              <!-- Changed ID -->
              <div class="grid grid-cols-2 gap-4">
                <input
                  id="a11_2x2"
                  type="text"
                  placeholder="a11"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a12_2x2"
                  type="text"
                  placeholder="a12"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a21_2x2"
                  type="text"
                  placeholder="a21"
                  class="px-3 py-1 border rounded"
                />
                <input
                  id="a22_2x2"
                  type="text"
                  placeholder="a22"
                  class="px-3 py-1 border rounded"
                />
              </div>
              <div class="flex items-center justify-between mt-4">
                <button
                  type="button"
                  id="hitungDeterminan_2x2"
                  class="px-4 py-2 text-white transition duration-200 bg-blue-600 rounded-lg hover:bg-gradient"
                >
                  Hitung Determinan
                </button>
                <!-- Changed ID -->
                <button
                  type="button"
                  id="clearInputs_2x2"
                  class="w-10 px-2 py-2 text-gray-700 transition duration-200 bg-white rounded rounded-full hover:bg-gradient"
                >
                  <img src="img/refresh-cw-alt-3-svgrepo-com.svg" alt="" />
                </button>
                <!-- Changed ID -->
              </div>
            </form>
            <div id="result_2x2" class="mt-4"></div>
            <div id="explanation_2x2" class="mt-4 text-gray-600"></div>
            <div id="history_2x2" class="mt-4">
              <!-- Changed ID -->
              <h2 class="mb-2 text-xl font-bold">History</h2>
              <ul id="historyList_2x2"></ul>
              <!-- Changed ID -->
            </div>
          </div>

          <!-- DETERMINAN ORDO 2X2 END  -->
        </div>
      </div>
    </section>
    <!-- KALKULATOR DETERMINAN END  -->
    <script>
      //   Navbar start
      let navMenuDiv = document.getElementById("nav-content");
      let navMenu = document.getElementById("nav-toggle");

      document.onclick = check;
      function check(e) {
        let target = (e && e.target) || (event && event.srcElement);

        //Nav Menu
        if (!checkParent(target, navMenuDiv)) {
          // click NOT on the menu
          if (checkParent(target, navMenu)) {
            // click on the link
            if (navMenuDiv.classList.contains("hidden")) {
              navMenuDiv.classList.remove("hidden");
            } else {
              navMenuDiv.classList.add("hidden");
            }
          } else {
            // click both outside link and outside menu, hide menu
            navMenuDiv.classList.add("hidden");
          }
        }
      }
      function checkParent(t, elm) {
        while (t.parentNode) {
          if (t == elm) {
            return true;
          }
          t = t.parentNode;
        }
        return false;
      }

      let scrollpos = window.scrollY;
      let header = document.getElementById("header");
      let navcontent = document.getElementById("nav-content");
      let navaction = document.getElementById("navAction");
      let brandname = document.getElementById("brandname");
      let toToggle = document.querySelectorAll(".toggleColour");

      document.addEventListener("scroll", function () {
        /*Apply classes for slide in bar*/
        scrollpos = window.scrollY;

        if (scrollpos > 10) {
          header.classList.add("bg-white");
          navaction.classList.remove("bg-white");
          navaction.classList.add("gradient");
          navaction.classList.remove("text-gray-800");
          navaction.classList.add("text-white");
          //Use to switch toggleColour colours
          for (let i = 0; i < toToggle.length; i++) {
            toToggle[i].classList.add("text-gray-800");
            toToggle[i].classList.remove("text-white");
          }
          header.classList.add("shadow");
          navcontent.classList.remove("bg-gray-100");
          navcontent.classList.add("bg-white");
        } else {
          header.classList.remove("bg-white");
          navaction.classList.remove("gradient");
          navaction.classList.add("bg-white");
          navaction.classList.remove("text-white");
          navaction.classList.add("text-gray-800");
          //Use to switch toggleColour colours
          for (let i = 0; i < toToggle.length; i++) {
            toToggle[i].classList.add("text-white");
            toToggle[i].classList.remove("text-gray-800");
          }

          header.classList.remove("shadow");
          navcontent.classList.remove("bg-white");
          navcontent.classList.add("bg-gray-100");
        }
      });

      //   Navbar end

      let calculations_2x2 = [];
      var calculations = [];
      var historyList = document.getElementById("historyList");

      // Function to handle form submission
      document
        .getElementById("matrixForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent form submission
          var matrixValues = [];
          var inputs = document.querySelectorAll("#matrixForm input");
          inputs.forEach(function (input) {
            matrixValues.push(parseFloat(input.value.trim()));
          });
          if (matrixValues.length !== 9 || matrixValues.some(isNaN)) {
            document.getElementById("result").innerText =
              "Masukkan sepenuhnya matriks yang valid.";
            document.getElementById("explanation").innerText = "";
            return;
          }
          var determinant = calculateDeterminant(matrixValues);
          document.getElementById(
            "result"
          ).innerHTML = `<span style="font-size: larger;">Determinan = ${determinant}</span>`;

          document.getElementById(
            "explanation"
          ).innerHTML = `<p><strong>Cara Mengerjakan:</strong> Untuk menghitung determinan matriks 3x3, gunakan rumus berikut:</p> +
          <p>det(A) = a11 * (a22 * a33 - a23 * a32) - a12 * (a21 * a33 - a23 * a31) + a13 * (a21 * a32 - a22 * a31)</p>`;
          // Add calculation to history
          var historyItem = matrixValues.join(", ") + " = " + determinant;
          calculations.push(historyItem);
          renderHistory();
        });

      // Function to handle clearing form inputs
      document
        .getElementById("clearInputs")
        .addEventListener("click", function () {
          var inputs = document.querySelectorAll("#matrixForm input");
          inputs.forEach(function (input) {
            input.value = "";
          });
        });

      // Function to calculate determinant
      function calculateDeterminant(matrix) {
        var a11 = matrix[0],
          a12 = matrix[1],
          a13 = matrix[2];
        var a21 = matrix[3],
          a22 = matrix[4],
          a23 = matrix[5];
        var a31 = matrix[6],
          a32 = matrix[7],
          a33 = matrix[8];
        return (
          a11 * (a22 * a33 - a23 * a32) -
          a12 * (a21 * a33 - a23 * a31) +
          a13 * (a21 * a32 - a22 * a31)
        );
      }

      // Function to render history
      function renderHistory() {
        historyList.innerHTML = "";
        calculations.forEach(function (calculation) {
          var listItem = document.createElement("li");
          listItem.textContent = calculation;
          listItem.classList.add(
            "cursor-pointer",
            "hover:bg-gray-100",
            "p-1",
            "rounded"
          );
          historyList.appendChild(listItem);
          // Add click event listener to each history item
          listItem.addEventListener("click", function () {
            var values = this.textContent.split("=")[0].split(",");
            document
              .querySelectorAll("#matrixForm input")
              .forEach(function (input, index) {
                input.value = parseFloat(values[index].trim());
              });
          });
        });
      }
      // ordo 2x2

      document
        .getElementById("hitungDeterminan_2x2")
        .addEventListener("click", function () {
          let a11 = parseFloat(document.getElementById("a11_2x2").value.trim());
          let a12 = parseFloat(document.getElementById("a12_2x2").value.trim());
          let a21 = parseFloat(document.getElementById("a21_2x2").value.trim());
          let a22 = parseFloat(document.getElementById("a22_2x2").value.trim());

          if (isNaN(a11) || isNaN(a12) || isNaN(a21) || isNaN(a22)) {
            document.getElementById("result_2x2").innerText =
              "Masukkan sepenuhnya matriks yang valid.";
            return;
          }

          let determinant = calculateDeterminant_2x2(a11, a12, a21, a22);
          document.getElementById("result_2x2").innerText =
            "Determinan = " + determinant;

          // Explanation
          document.getElementById("explanation_2x2").innerHTML =
            "<p><strong>Cara Mengerjakan:</strong> Untuk menghitung determinan matriks 2x2, gunakan rumus berikut:</p>" +
            "<p>det(A) = (a11 * a22) - (a12 * a21)</p>";

          // Add to history
          let historyItem =
            [a11, a12, a21, a22].join(", ") + " = " + determinant;
          calculations_2x2.push(historyItem);
          renderHistory_2x2();
        });

      function calculateDeterminant_2x2(a11, a12, a21, a22) {
        return a11 * a22 - a12 * a21;
      }

      function renderHistory_2x2() {
        let historyList_2x2 = document.getElementById("historyList_2x2");
        historyList_2x2.innerHTML = "";
        calculations_2x2.forEach(function (calculation) {
          let listItem = document.createElement("li");
          listItem.textContent = calculation;
          listItem.classList.add(
            "cursor-pointer",
            "hover:bg-gray-100",
            "p-1",
            "rounded"
          );
          listItem.addEventListener("click", function () {
            let values = calculation.split("=")[0].split(",");
            document.getElementById("a11_2x2").value = parseFloat(
              values[0].trim()
            );
            document.getElementById("a12_2x2").value = parseFloat(
              values[1].trim()
            );
            document.getElementById("a21_2x2").value = parseFloat(
              values[2].trim()
            );
            document.getElementById("a22_2x2").value = parseFloat(
              values[3].trim()
            );
          });
          historyList_2x2.appendChild(listItem);
        });
      }

      // refresh 2x2
      document
        .getElementById("clearInputs_2x2")
        .addEventListener("click", function () {
          var inputs = document.querySelectorAll("#matrixForm_2x2 input");
          inputs.forEach(function (input) {
            input.value = "";
          });
        });

      document.querySelectorAll("#matrixForm input").forEach(function (input) {
        input.addEventListener("keydown", function (event) {
          var key = event.key;
          var index = Array.prototype.indexOf.call(
            input.parentElement.children,
            input
          );
          var nextIndex = -1;
          if (key === "ArrowUp") {
            nextIndex = index - 3;
          } else if (key === "ArrowDown") {
            nextIndex = index + 3;
          } else if (key === "ArrowLeft") {
            nextIndex = index - 1;
          } else if (key === "ArrowRight") {
            nextIndex = index + 1;
          }
          if (nextIndex >= 0 && nextIndex < 9) {
            event.preventDefault();
            input.parentElement.children[nextIndex].focus();
          }
        });
      });
      document
        .querySelectorAll("#matrixForm_2x2 input")
        .forEach(function (input) {
          input.addEventListener("keydown", function (event) {
            var key = event.key;
            var index = Array.prototype.indexOf.call(
              input.parentElement.children,
              input
            );
            var nextIndex = -1;
            if (key === "ArrowUp") {
              nextIndex = index - 2;
            } else if (key === "ArrowDown") {
              nextIndex = index + 2;
            } else if (key === "ArrowLeft") {
              nextIndex = index - 1;
            } else if (key === "ArrowRight") {
              nextIndex = index + 1;
            }
            if (nextIndex >= 0 && nextIndex < 4) {
              event.preventDefault();
              input.parentElement.children[nextIndex].focus();
            }
          });
        });
    </script>
  </body>
</html>
